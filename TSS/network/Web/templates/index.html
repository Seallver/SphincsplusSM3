<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SPX TSS</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}">
</head>
<body>
    <div class="container">
        <h1>SPX TSS</h1>
        <p id="instruction">请选择您需要的操作</p>
        
        <!-- 主按钮组 -->
        <div class="button-group fade-in" id="main-buttons">
            <button id="keygen">KeyGen</button>
            <button id="sign">Sign</button>
            <button id="verify">Verify</button>
        </div>
        
        <!-- 角色选择按钮组 -->
        <div class="button-group hidden" id="role-buttons">
            <button id="ttp">as TTP</button>
            <button id="player">as Player</button>
            <button class="back-btn" id="back-to-main">返回</button>
        </div>
        
        <!-- TTP表单 -->
        <div class="form-group hidden" id="ttp-form">
            <h3>TTP 配置</h3>
            <div class="form-row">
                <label for="ttp-n">n:</label>
                <input type="number" id="ttp-n" min="1" placeholder="请输入参与者总数">
            </div>
            <div class="form-row">
                <label for="ttp-t">t:</label>
                <input type="number" id="ttp-t" min="1" placeholder="请输入门限数">
            </div>
            <div class="form-row threshold-ids-row">
                <label for="ttp-mess">Message:</label>
                <textarea id="ttp-mess" placeholder="请输入消息"></textarea>
            </div>
            <div class="form-row threshold-ids-row">
                <label for="ttp-threshold-ids">Threshold IDs:</label>
                <textarea id="ttp-threshold-ids" placeholder="请按序输入所有门限方ID，形如(1 2 ...)"></textarea>
            </div>
            <div class="form-row">
                <label for="ttp-ips">IPs:</label>
                <textarea id="ttp-ips" placeholder="请依次输入IP地址，形如(127.0.0.1 127.0.0.1 127.0.0.1 127.0.0.1 ...)"></textarea>
            </div>
            <div class="form-row">
                <label for="ttp-ports">Ports:</label>
                <textarea id="ttp-ports" placeholder="请输入对应端口号，形如(10000 10001 10002 10003 ...)"></textarea>
            </div>
            <button class="submit-btn" id="ttp-submit">提交</button>
            <button class="back-btn" id="back-to-role-from-ttp">返回</button>
        </div>
        
        <!-- Player表单 -->
        <div class="form-group hidden" id="player-form">
            <h3>Player 配置</h3>
            <div class="form-row">
                <label for="player-n">n:</label>
                <input type="number" id="player-n" min="1" placeholder="请输入参与者总数">
            </div>
            <div class="form-row">
                <label for="player-t">t:</label>
                <input type="number" id="player-t" min="1" placeholder="请输入门限数">
            </div>
            <div class="form-row">
                <label for="player-party-id">Party ID:</label>
                <input type="number" id="player-party-id" min="1" placeholder="请输入参与者ID">
            </div>
            <div class="form-row threshold-ids-row">
                <label for="player-mess">Message:</label>
                <textarea id="player-mess" placeholder="请输入消息"></textarea>
            </div>
            <div class="form-row threshold-ids-row">
                <label for="player-threshold-ids">Threshold IDs:</label>
                <textarea id="player-threshold-ids" placeholder="请按序输入所有门限方ID，形如(1 2 ...)"></textarea>
            </div>
            <div class="form-row">
                <label for="player-ips">IPs:</label>
                <textarea id="player-ips" placeholder="请依次输入IP地址，形如(127.0.0.1 127.0.0.1 127.0.0.1 127.0.0.1 ...)"></textarea>
            </div>
            <div class="form-row">
                <label for="player-ports">Ports:</label>
                <textarea id="player-ports" placeholder="请输入对应端口号，形如(10000 10001 10002 10003 ...)"></textarea>
            </div>
            <button class="submit-btn" id="player-submit">提交</button>
            <button class="back-btn" id="back-to-role-from-player">返回</button>
        </div>

        <div class="form-group hidden" id="verify-form">
            <h3>验证签名</h3>
            <div class="form-row">
                <label for="verify-json">选择JSON文件：</label>
                <input type="file" id="verify-json" accept=".json">
            </div>
            <button class="submit-btn" id="verify-submit">提交验证</button>
            <button class="back-btn" id="back-to-main-from-verify">返回</button>
        </div>
        
        <div class="status" id="status">
            就绪
        </div>
    </div>
    
    <!-- 结果模态框 -->
    <div class="result-modal" id="result-modal">
        <div class="modal-content">
            <h3 id="modal-title">操作结果</h3>
            <div id="modal-message"></div>
            <div id="modal-filename" class="filename-message"></div>
            <div class="modal-actions">
            </div>
        </div>
    </div>

    <!-- 加载动画模态框 -->
    <div class="loading-modal" id="loading-modal">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <p>处理中，请稍候...</p>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/index.js') }}"></script>
</body>
</html>